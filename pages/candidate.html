<!DOCTYPE html>
<html class="light" lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile - MatchFlow</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">

    <style>
        :root { --primary: #137fec; }
        body { font-family: 'Inter', sans-serif; }

    .avatar-overlay{
      position:absolute;
      top: 6px;
      right: 6px;
      width: 36px;
      height: 36px;
      border-radius: 999px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      background: #198754;
      color:#fff;
      border: 2px solid #fff;
    }

    /* Para que tu contenido tenga buen padding dentro del main */
    .profile-wrap{ padding: 24px; }
    @media (max-width: 768px){
      .profile-wrap{ padding: 16px; }
    }
    </style>
</head>

<body>
  <div class="app-layout">

    <!-- Sidebar (MISMO del dashboard, ajustado a Profile) -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo-icon">
          <span class="material-symbols-outlined">all_inclusive</span>
                </div>
        <div>
          <h1 class="logo-title">MatchFlow</h1>
          <p class="logo-subtitle">Candidate</p>
        </div>
      </div>

      <nav class="sidebar-nav">
        <a href="#" class="nav-item active">
          <span class="material-symbols-outlined filled">person</span>
          <p>Profile</p>
        </a>

        <a href="dashboard_user.html" class="nav-item">
          <span class="material-symbols-outlined">favorite</span>
          <p>My Matches</p>
          <span class="badge" id="matches-count">0</span>
        </a>

        

         <a href="#" class="nav-item" onclick="logout(); return false;">
                    <span class="material-symbols-outlined">logout</span>
                    <p>Logout</p>
        </a>
      </nav>

      <div class="sidebar-footer">
        <div class="profile-card">
          <img id="user-avatar" class="profile-avatar" src="https://via.placeholder.com/40?text=%3F" alt="User" width="40" height="40">
          <div class="profile-info">
            <p class="profile-name" id="user-name">User</p>
            <p class="profile-role" id="user-role">Candidate</p>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Header arriba (opcional, estilo dashboard) -->
      <header class="header">
        <div class="header-content">
          <div class="header-left">
            <h2 class="header-title-mobile">Profile</h2>
                </div>
          <div class="header-right">
                        <button class="btn-new-search" id="toggle-view-btn">
                            <span class="material-symbols-outlined">swap_horiz</span>
                            <span id="toggle-text">View Offers</span>
                        </button>
            </div>
        </div>
    </header>

      <div class="content-area">
        <div class="profile-wrap">

          <div id="profileError" class="alert alert-danger d-none">
            We couldn’t load your profile. Please refresh the page.
            </div>

            <!-- Profile Hero -->
          <section class="card shadow-sm mb-4">
            <div class="card-body">
              <div class="d-flex gap-4 flex-wrap align-items-center">
                    <div class="position-relative">
                  <img src="https://via.placeholder.com/120" id="profileAvatar" class="rounded-circle" width="120" height="120" alt="Profile photo">
                  <div class="avatar-overlay" id="avatarEdit" title="Change photo">
                            <span class="material-symbols-outlined">photo_camera</span>
                            <input type="file" id="photoInput" accept="image/*" class="d-none">
                        </div>
                    </div>

                    <div class="flex-grow-1">
                        <h1 id="profileName" class="fw-bold mb-1">Your full name</h1>
                        <p id="profileTitle" class="text-muted mb-2">Your profession</p>

                        <div class="d-flex gap-2 mb-3">
                            <span id="openToWorkBadge" class="badge bg-success">Open to Work</span>
                        </div>

                        <div class="d-flex gap-3 align-items-center">
                    <label class="d-flex align-items-center gap-2 mb-0">
                                <input type="checkbox" id="openToWorkToggle" checked>
                                <span>Open to Work</span>
                            </label>
                    <!-- Botón ya está arriba, este lo puedes dejar o quitar -->
                    <button class="btn btn-primary btn-sm" id="editProfileBtn" type="button">Edit Personal information</button>
                  </div>
                        </div>
                    </div>
                </div>
            </section>

            <div class="row g-4">
            <!-- Bio -->
                <div class="col-12">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title fw-bold mb-3">About me</h5>
                  <p id="profileBio" class="mb-0 text-muted">Tell something about yourself</p>
                </div>
              </div>
            </div>

            <!-- Work Experience -->
            <div class="col-12">
              <div class="card shadow-sm">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="card-title mb-0 fw-bold">Work Experience</h5>
                    <button class="btn btn-sm btn-outline-primary" data-section="experience" type="button">Edit</button>
                            </div>
                  <div id="profileExperience" class="text-center text-muted py-4">
                                <span class="material-symbols-outlined d-block mb-2" style="font-size: 40px;">work</span>
                                <p class="mb-0">Add your professional experience</p>
                            </div>
                        </div>
                    </div>
                </div>

            <!-- Skills -->
            <div class="col-12 col-md-6">
              <div class="card shadow-sm h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="card-title mb-0 fw-bold">Skills</h5>
                    <button class="btn btn-sm btn-outline-primary" data-section="skills" type="button">Edit</button>
                            </div>
                  <div id="profileSkills" class="text-center text-muted py-4">
                                <span class="material-symbols-outlined d-block mb-2" style="font-size: 40px;">code</span>
                                <p class="mb-0">Add your technical skills</p>
                            </div>
                        </div>
                    </div>
                </div>

            <!-- Languages -->
            <div class="col-12 col-md-6">
              <div class="card shadow-sm h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="card-title mb-0 fw-bold">Languages</h5>
                    <button class="btn btn-sm btn-outline-primary" data-section="languages" type="button">Edit</button>
                            </div>
                  <div id="profileLanguages" class="text-center text-muted py-4">
                                <span class="material-symbols-outlined d-block mb-2" style="font-size: 40px;">language</span>
                                <p class="mb-0">Add languages you speak</p>
                            </div>
                        </div>
                    </div>
                </div>

            <!-- Contact -->
            <div class="col-12">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title fw-bold mb-3">Contact</h5>
                  <div class="d-flex flex-column gap-2">
                    <div>
                      <strong>Email</strong><br>
                      <span id="profileEmail" class="text-muted">-</span>
                    </div>
                    <div>
                      <strong>Phone</strong><br>
                      <span id="profilePhone" class="text-muted">-</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div><!-- /row -->
        </div><!-- /profile-wrap -->
      </div><!-- /content-area -->
        </main>
    </div>

    <!-- Edit Modal -->
  <div class="modal fade" id="profileModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title">Edit Profile</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <form id="profileForm">
                        <div class="mb-3">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="modalName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Profession</label>
              <input type="text" class="form-control" id="modalProfession">
                        </div>
                        <div class="mb-3">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" id="modalEmail">
                        </div>
                        <div class="mb-3">
              <label class="form-label">Phone</label>
              <input type="text" class="form-control" id="modalPhone">
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveProfileBtn">Save Changes</button>
                </div>

            </div>
        </div>
    </div>

    <!-- Skills Modal -->
<div class="modal fade" id="skillsModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit Skills</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <div class="d-flex gap-2">
          <input type="text" class="form-control" id="skillInput" placeholder="e.g. JavaScript">
          <button type="button" class="btn btn-primary" id="addSkillBtn">Add</button>
        </div>

        <hr class="my-

        <div id="skillsList" class="d-flex flex-wrap gap-2"></div>
        <div id="skillsEmpty" class="text-muted small mt-2 d-none">No skills yet.</div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="saveSkillsBtn">Save</button>
      </div>
    </div>
  </div>
</div>

<!-- Languages Modal -->
<div class="modal fade" id="languagesModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit Languages</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <div class="row g-2">
          <div class="col-7">
            <input type="text" class="form-control" id="languageNameInput" placeholder="Language (e.g. English)">
          </div>
          <div class="col-5">
            <input type="text" class="form-control" id="languageLevelInput" placeholder="Level (e.g. B2)">
          </div>
          <div class="col-12">
            <button type="button" class="btn btn-primary w-100" id="addLanguageBtn">Add</button>
          </div>
        </div>

        <hr class="my-3">

        <div id="languagesList" class="list-group"></div>
        <div id="languagesEmpty" class="text-muted small mt-2 d-none">No languages yet.</div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="saveLanguagesBtn">Save</button>
      </div>
    </div>
  </div>
</div>

<!-- Experience Modal -->
<div class="modal fade" id="experienceModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit Work Experience</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <div class="row g-2">
          <div class="col-md-6">
            <input type="text" class="form-control" id="expPositionInput" placeholder="Position (e.g. Frontend Dev)">
          </div>
          <div class="col-md-6">
            <input type="text" class="form-control" id="expCompanyInput" placeholder="Company (e.g. Acme Inc.)">
          </div>
          <div class="col-md-3">
            <input type="text" class="form-control" id="expStartInput" placeholder="Start (YYYY-MM)">
          </div>
          <div class="col-md-3">
            <input type="text" class="form-control" id="expEndInput" placeholder="End (YYYY-MM or blank)">
          </div>
          <div class="col-md-6">
            <input type="text" class="form-control" id="expDescriptionInput" placeholder="Short description">
          </div>
          <div class="col-12">
            <button type="button" class="btn btn-primary w-100" id="addExperienceBtn">Add</button>
          </div>
        </div>

        <hr class="my-3">

        <div id="experienceList" class="list-group"></div>
        <div id="experienceEmpty" class="text-muted small mt-2 d-none">No experience yet.</div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="saveExperienceBtn">Save</button>
      </div>
    </div>
  </div>
</div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="../scripts/candidate.js"></script>
</body>
</html>
